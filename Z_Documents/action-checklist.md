# Fitness Log App - 実装チェックリスト

**最終更新:** 2026-01-01
**目標:** P0コア機能の完成 → 100ユーザー獲得

---

## 📋 現在のステータス

### ✅ 完了済み
- [x] Flutterプロジェクトの初期化
- [x] 依存関係の設定（pubspec.yaml）
- [x] データモデル定義（Entities）
- [x] データアクセス層（DAOs）
- [x] 状態管理の基盤（Providers）
- [x] i18nリソースのセットアップ
- [x] 全P0画面のファイル作成

### 🔄 進行中 / 未確認
- [ ] 各画面の動作確認
- [ ] データフローの検証
- [ ] UX目標の達成度確認

---

## 🎯 Phase 1: 動作確認と基本修正（最優先・今週中）

### 1.1 開発環境の確認
- [ ] `flutter doctor` を実行し、環境の問題を解決
- [ ] `flutter pub get` で依存関係を最新化
- [ ] `flutter analyze` でコードの静的解析を実行し、警告・エラーを修正

### 1.2 ビルドとアプリ起動
- [ ] iOSシミュレータでアプリをビルド・起動（`flutter run -d ios`）
- [ ] Androidエミュレータでアプリをビルド・起動（`flutter run -d android`）
- [ ] ビルドエラーがあれば解決する
  - [ ] 依存関係の問題
  - [ ] ネイティブビルドの問題
  - [ ] 設定ファイルの問題

### 1.3 データベース初期化の確認
- [ ] アプリ初回起動時にデータベースが正しく作成されることを確認
- [ ] `database_helper.dart` のテーブル作成SQLを確認
- [ ] マイグレーションロジックが正しく動作することを確認
- [ ] 標準種目マスタデータが投入されることを確認（未実装の場合は実装）

### 1.4 基本フローの動作確認
- [ ] **Initial Setup Screen**
  - [ ] 初回起動時に表示されることを確認
  - [ ] 言語選択（English / 日本語）が動作
  - [ ] 単位選択（kg / lb）が動作
  - [ ] 「始める」ボタンでHome Screenへ遷移
  - [ ] 設定がDBに保存されることを確認

- [ ] **Home Screen**
  - [ ] 日付が正しく表示される
  - [ ] 「トレーニング開始」ボタンが表示される
  - [ ] ボタンタップでWorkout Input Screenへ遷移
  - [ ] 設定ボタンでSettings Screenへ遷移

- [ ] **Workout Input Screen（最重要）**
  - [ ] 画面が正しく表示される
  - [ ] 「種目を追加」ボタンが動作する
  - [ ] Exercise Selector Modalが表示される
  - [ ] 部位選択が動作する
  - [ ] 種目選択が動作する
  - [ ] 選択した種目のカードが表示される
  - [ ] セット入力（重量・回数）が動作する
  - [ ] セット追加（+ボタン）が動作する
  - [ ] セット削除（×ボタン）が動作する
  - [ ] 「記録完了」ボタンでHome Screenへ遷移
  - [ ] 記録がDBに保存されることを確認

- [ ] **Settings Screen**
  - [ ] 言語切替が動作する
  - [ ] 単位切替が動作する
  - [ ] 変更がDBに保存される
  - [ ] 画面全体の文言が切り替わる

### 1.5 前回記録機能の確認
- [ ] 2回目のワークアウトで前回記録が表示されることを確認
- [ ] 前回記録の内容が正しい（同一種目の直近completedセッション）
- [ ] 「前回コピー」ボタンが動作する（セット単位）
- [ ] 「前回を再現」ボタンが動作する（全セット一括コピー）
- [ ] 前回が存在しない種目では「—」と表示される
- [ ] コピー時の単位変換が正しく動作する（kg ↔ lb）

### 1.6 タイマー機能の確認
- [ ] Timer Mini Widgetが画面に表示される
- [ ] ミニ表示が記録入力を邪魔しない位置にある
- [ ] ミニ表示タップでTimer Modalが開く
- [ ] Start / Pause / Reset ボタンが動作する
- [ ] カウントダウンが正しく動作する
- [ ] 終了時に通知が表示される（音/バイブ）
- [ ] タイマー動作中も記録入力が可能

---

## 🎯 Phase 2: P0拡張機能の動作確認（Phase 1完了後）

### 2.1 Workout Detail Screen
- [ ] 履歴からその日の詳細画面へ遷移できる
- [ ] 日付、開始〜終了時刻が表示される
- [ ] 実施した種目一覧が表示される
- [ ] 各種目のセット詳細が表示される
- [ ] 種目タップでExercise Progress Screenへ遷移

### 2.2 History Screen（カレンダー履歴）
- [ ] Home Screenからカレンダーアイコンで遷移できる
- [ ] 月間カレンダーが表示される
- [ ] ワークアウト実施日にマーカーが表示される
- [ ] 前月/次月ボタンで月切替ができる
- [ ] 日付タップでWorkout Summary Sheetが表示される
- [ ] サマリに日付・時刻・種目数・セット数が表示される
- [ ] 「詳細を見る」ボタンでWorkout Detail Screenへ遷移

### 2.3 Exercise Progress Screen（種目別グラフ）
- [ ] 種目タップで遷移できる
- [ ] 種目名が表示される
- [ ] グラフが表示される（トップ重量 or 総ボリューム）
- [ ] 直近3ヶ月のデータが表示される
- [ ] 記録が少ない場合の空状態が表示される

---

## 🎯 Phase 3: UX目標の達成度確認

### 3.1 速度目標の確認
- [ ] **ホーム→記録開始：2タップ以内**
  - [ ] 実測してタップ数をカウント
  - [ ] 目標未達の場合は導線を改善

- [ ] **1セット入力：5秒以内**
  - [ ] ストップウォッチで実測
  - [ ] 目標未達の場合は入力UIを改善
  - [ ] 数値入力のしやすさを確認

- [ ] **前回コピー：1タップ**
  - [ ] セット単位コピーが1タップで完了することを確認
  - [ ] 全セットコピー（前回を再現）が1タップで完了することを確認

- [ ] **タイマー操作：親指1箇所で完結**
  - [ ] ミニ表示が親指の届く範囲にある
  - [ ] Start/Pause/Resetが親指で操作できる

### 3.2 親指操作の最適化
- [ ] 主要ボタンが画面下部（親指ゾーン）にある
- [ ] 片手操作でストレスなく使える
- [ ] 誤タップが起きにくい配置になっている

### 3.3 迷わない設計の確認
- [ ] 画面遷移が直感的
- [ ] 戻る導線が明確
- [ ] 次に何をすべきか迷わない
- [ ] エラーメッセージが分かりやすい

---

## 🎯 Phase 4: データ整合性とエッジケースの確認

### 4.1 データ保存と復元
- [ ] アプリを終了して再起動しても記録が保持される
- [ ] 記録中（in_progress）のセッションが復元される
- [ ] 記録完了（completed）のセッションが履歴に表示される

### 4.2 単位変換
- [ ] kg → lb の変換が正しい（1kg = 2.20462lb）
- [ ] lb → kg の変換が正しい
- [ ] 単位切替後も既存記録が正しく表示される
- [ ] 前回コピー時の自動変換が正しく動作する

### 4.3 エッジケース
- [ ] セットが0個の種目を保存しようとした場合の挙動
- [ ] 重量・回数が空の場合の挙動
- [ ] 極端に大きな数値（重量999kg、回数999回等）の挙動
- [ ] 同じ種目を複数回追加した場合の挙動
- [ ] 記録中にアプリをバックグラウンドにした場合の挙動

### 4.4 i18n
- [ ] 全ての画面で言語切替が反映される
- [ ] 文字列が直書きされていない（すべてl10nリソース化）
- [ ] 日付・数値のフォーマットが言語に応じて変わる
- [ ] 英語版で表示崩れがない
- [ ] 日本語版で表示崩れがない

---

## 🎯 Phase 5: 不足データの追加

### 5.1 種目マスタデータの投入
- [ ] 標準的な種目リストを定義
  - [ ] 胸（ベンチプレス、ダンベルプレス、ダンベルフライ等）
  - [ ] 背中（デッドリフト、ラットプルダウン、ベントオーバーロウ等）
  - [ ] 脚（スクワット、レッグプレス、レッグカール等）
  - [ ] 肩（ショルダープレス、サイドレイズ等）
  - [ ] 腕（バーベルカール、トライセプスエクステンション等）
  - [ ] 腹（クランチ、レッグレイズ等）
- [ ] 英語名・日本語名を両方定義
- [ ] 初回DB作成時に投入されることを確認

### 5.2 集計ロジックの実装確認
- [ ] **今月のトレーニング回数**
  - [ ] `WorkoutSessionDao.getMonthlyWorkoutCount()` が実装されている
  - [ ] 当月のcompletedセッション数を正しくカウントする
  - [ ] Home Screenに表示される

- [ ] **トレーニング継続日数**
  - [ ] `WorkoutSessionDao.getCurrentStreak()` が実装されている
  - [ ] 連続日数の計算ロジックが正しい（2日以内で継続、途切れたらリセット）
  - [ ] Home Screenに表示される

---

## 🎯 Phase 6: ユニットテストの実装

### 6.1 優先度高（MVP必須）
- [ ] `UnitConverter` のテスト
  - [ ] kg → lb 変換
  - [ ] lb → kg 変換
  - [ ] 丸め処理

- [ ] 前回記録取得ロジックのテスト
  - [ ] 直近の同一種目のcompletedセッションを取得
  - [ ] in_progressセッションは除外
  - [ ] 前回が存在しない場合は空を返す

- [ ] 継続日数計算のテスト
  - [ ] 連続している場合
  - [ ] 途切れた場合
  - [ ] 記録が0件の場合

- [ ] 今月の回数計算のテスト
  - [ ] 当月のセッションをカウント
  - [ ] 月をまたいだ場合

### 6.2 優先度中（余裕があれば）
- [ ] `WorkoutSessionDao` の各メソッドのテスト
- [ ] `SetRecordDao` の各メソッドのテスト
- [ ] `ExerciseMasterDao` の各メソッドのテスト
- [ ] Providerのロジックテスト

---

## 🎯 Phase 7: コード品質の改善

### 7.1 静的解析の警告修正
- [ ] `flutter analyze` で警告がゼロになる
- [ ] 未使用のインポート削除
- [ ] 型の明示化
- [ ] Null safetyの徹底

### 7.2 コードレビュー
- [ ] 命名規則の統一（screen, widget, provider等）
- [ ] 重複コードのリファクタリング
- [ ] マジックナンバーの定数化
- [ ] コメントの追加（複雑なロジックのみ）

### 7.3 エラーハンドリング
- [ ] DB操作のエラーハンドリング
- [ ] ユーザーへのエラーメッセージ表示
- [ ] クラッシュが起きないことを確認

---

## 🎯 Phase 8: 実機テスト

### 8.1 iOS実機
- [ ] 実機でビルド・起動
- [ ] 基本フローの動作確認
- [ ] パフォーマンス確認（入力のカクつき等）
- [ ] 通知権限の動作確認（タイマー終了通知）
- [ ] 端末を回転させた場合の挙動

### 8.2 Android実機
- [ ] 実機でビルド・起動
- [ ] 基本フローの動作確認
- [ ] パフォーマンス確認
- [ ] 通知権限の動作確認
- [ ] 端末を回転させた場合の挙動
- [ ] 戻るボタンの動作確認

### 8.3 複数端末でのテスト
- [ ] iPhone（小型）での表示確認
- [ ] iPhone（大型）での表示確認
- [ ] Androidスマホ（小型）での表示確認
- [ ] Androidスマホ（大型）での表示確認

---

## 🎯 Phase 9: ユーザーテスト準備

### 9.1 3人のテストユーザー確保
- [ ] 筋トレを週2回以上する友人/知人を3人確保
- [ ] テスト内容を説明（観察型テスト）
- [ ] フィードバック方法を伝える

### 9.2 観察ポイント準備
- [ ] 1セット入力に何秒かかるかストップウォッチで測定
- [ ] どこで操作に迷うか観察
- [ ] タイマーが邪魔か/見つけやすいか確認
- [ ] 前回コピーが直感的か確認
- [ ] 「これなら使い続けたい」と思うか質問

### 9.3 フィードバックの収集と分析
- [ ] 各テストユーザーの意見を記録
- [ ] 共通する問題点を抽出
- [ ] UIで解決できる改善点をリストアップ
- [ ] P1/P2で対応すべき要望を分類

---

## 🎯 Phase 10: β版配布準備

### 10.1 TestFlight（iOS）セットアップ
- [ ] Apple Developer Programに登録（未登録の場合）
- [ ] App Store Connectでアプリ登録
- [ ] TestFlightビルドをアップロード
- [ ] 外部テスターグループ作成
- [ ] テスト用の説明文を準備

### 10.2 Google Play Internal Testing（Android）セットアップ
- [ ] Google Play Consoleでアプリ登録
- [ ] Internal Testingトラックを作成
- [ ] AABファイルをアップロード
- [ ] テスターリストを作成
- [ ] テスト用の説明文を準備

### 10.3 既知の問題リスト作成
- [ ] テスト時に発見されたバグをリスト化
- [ ] 未実装の機能をリスト化
- [ ] 制限事項をリスト化
- [ ] テスターに共有

---

## 🎯 Phase 11: P1機能の実装（P0完成後）

### 11.1 P1-High（優先実装）
- [ ] 今月のトレーニング回数表示（Home Screen）
- [ ] トレーニング継続日数表示（Home Screen）
- [ ] タイマーのプリセット（60s/90s/120s）
- [ ] 種目の曖昧検索（部分一致）
- [ ] 自由入力種目の候補化（ユーザー辞書）

### 11.2 P1-Medium（余裕があれば）
- [ ] カレンダー履歴の月切替改善
- [ ] 履歴のフィルタリング機能
- [ ] 前回セット一覧の省略表示（3セット以上で"…"）
- [ ] CSVエクスポート機能
- [ ] データバックアップ・リストア

### 11.3 P1-Low（後回し可能）
- [ ] Firebase Analyticsセットアップ
- [ ] 主要イベントの計測実装
- [ ] ダッシュボードでKPI確認

---

## 📊 完了条件（リリース判定基準）

### MVP成功の定義
- [ ] **Activation 60%**: 初回起動→1回のトレ記録完了が60%以上
- [ ] **D7継続率 20%**: 7日後も使っているユーザーが20%以上
- [ ] **週2回以上記録 10%**: コアユーザーが10%以上
- [ ] **ユーザーの声**: 「入力が速い」がユーザーの言葉で出る

### 技術的完了条件
- [ ] 致命的なバグがゼロ
- [ ] 主要フローが全て動作する
- [ ] ユニットテストが全てパス
- [ ] `flutter analyze` の警告がゼロ
- [ ] iOS/Android実機で安定動作

### UX完了条件
- [ ] ホーム→記録開始が2タップ以内
- [ ] 1セット入力が5秒以内
- [ ] 前回コピーが1タップ
- [ ] タイマーが親指1箇所で完結
- [ ] 3人のテストユーザーが「使いやすい」と評価

---

## 🚀 次の具体的なステップ（今すぐ実行）

### 今日やること
1. [ ] `flutter doctor` を実行
2. [ ] `flutter pub get` を実行
3. [ ] `flutter analyze` を実行して警告を確認
4. [ ] iOSシミュレータで `flutter run` を実行
5. [ ] アプリが起動するか確認
6. [ ] Initial Setup → Home → Workout Input の基本フローを操作
7. [ ] 動作しない部分をメモ

### 今週やること
1. [ ] Phase 1（動作確認と基本修正）を完了
2. [ ] 致命的なバグを全て修正
3. [ ] 1回のワークアウト記録が完全に動作することを確認
4. [ ] 前回記録が正しく表示されることを確認
5. [ ] タイマーが動作することを確認

### 来週やること
1. [ ] Phase 2（P0拡張機能の確認）を完了
2. [ ] Phase 3（UX目標の確認）を完了
3. [ ] 3人のテストユーザーにアプリを触ってもらう
4. [ ] フィードバックを収集して改善

---

## 💡 重要な注意事項

### やってはいけないこと
- ❌ P0以外の機能を勝手に追加しない
- ❌ 「高機能」を目指さない（速さ・迷わなさ優先）
- ❌ 複雑な分析機能を追加しない
- ❌ 同期/ログイン機能を今すぐ追加しない
- ❌ ユーザーテスト前に完璧を目指さない

### 迷ったときの判断基準
1. **速くなるか？** → Yes なら採用
2. **迷わなくなるか？** → Yes なら採用
3. **前回比較がしやすくなるか？** → Yes なら採用
4. **上記に当てはまらない** → P1/P2に保留

### 成功の鍵
- 入力体験（爆速 / 前回コピー / タイマー非干渉）
- 最初の100ユーザーが継続して使う
- 「これなら使い続けたい」と思ってもらう

---

**頑張りましょう！🔥**
